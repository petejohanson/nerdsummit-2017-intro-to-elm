<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Intro To Elm</title>

		<link rel="stylesheet" href="css/local.css">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/night.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/solarized-dark.css">

		<link rel="stylesheet" href="css/font-awesome.min.css">

		<script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
                document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
		<!-- Printing and PDF exports -->
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h2>Elm: A Delightful Language For Writing Web Apps</h2>
					<ul id="social-links">
						<li><i class="fa fa-fw fa-twitter"></i><a href="https://twitter.com/petejohanson">@petejohanson</a></li>
						<li><i class="fa fa-fw fa-github"></i><a href="https://github.com/petejohanson">@petejohanson</a></li>
					</ul>
					
				</section>

				<section>
					<section>
						<h2>What is Elm?</h2>
					</section>

					<section>
						<ul>
							<li>Functional language the compiles to JavaScript</li>
							<li class="fragment">The Elm Runtime to handle DOM updates, commands, and subscriptions</li>
							<li class="fragment">Set of core libraries (virtual DOM, data types, etc)</li>
							<li class="fragment">Tools for building and developing</li>
						</ul>
					</section>
				</section>

				<section>
				  <section>
				  	<img src="img/elephant-in-the-room.jpg" alt="The elephant in the room" width="740" height="457">
				  </section>
					<section>
						<h2>Functional Programming</h2>
					</section>
					<section>
						<h3>The Agreement</h3>
						<span>If you hear me say 'monad', 'lens', or 'functor', you have my permission to throw food at me.</span>
					</section>
				</section>

				<section>
				  <section>
				  	<h2>Hello, World</h2>
				  	<pre><code data-trim data-noescape class="elm">
import Html exposing (text)

main =
  text "Hello, World!"
						</code></pre>
				  </section>

				  <section>
				  	<pre><code data-trim data-noescape class="elm">
import Html exposing (beginnerProgram, div, button, text)
import Html.Events exposing (onClick)

main =
  beginnerProgram { model = 0, view = view, update = update }

view model =
  div []
    [ button [ onClick Decrement ] [ text "-" ]
    , div [] [ text (toString model) ]
    , button [ onClick Increment ] [ text "+" ]
    ]

type Msg = Increment | Decrement

update msg model =
  case msg of
    Increment -&gt;
      model + 1

    Decrement -&gt;
      model - 1
						</code></pre>
				  </section>
				</section>

				<section>
					<section>
						<h2>The Basics</h2>
					</section>

					<section>
						<h4>Values</h4>
						<pre><code data-trim data-noescape class="elm">
1
2 + 2
"test"
"Hello" ++ " world"
						</code></pre>
						<div class="fragment">
							<h4>Lists</h4>
							<pre><code data-trim data-noescape class="elm">[1,2,3]</code></pre>
						</div>

						<div class="fragment">
							<h4>Union Types</h4>
							<pre><code data-trim data-noescape class="elm">
type Answer = Yes | No
type TodoStatus = New | InProgress Int | Done
type Maybe a = Nothing | Just a
							</code></pre>
						</div>
					</section>

					<section>
						<h4>Records</h4>
						<pre><code data-trim data-noescape class="elm">
point =                         -- create a record
  { x = 3, y = 4 }

point.x                         -- access field

List.map .x [point,{x=0,y=0}]   -- field access function

{ point |                       -- update fields
  x = point.x + 1,
  y = point.y + 1
}

dist {x,y} =                    -- pattern matching on fields
  sqrt (x^2 + y^2)
						</code></pre>
					</section>

					<section>
						<h4>Functions</h4>
						<pre><code data-trim data-noescape class="elm">
doubler : number -> number
doubler value =
  value * 2
						</code></pre>
					</section>

					<section>
						<h4>Multiple Parameters</h4>
						<pre><code data-trim data-noescape class="elm">
pow : number -> number -> number
pow power value =
  value ^ power
						</code></pre>
						<pre class="fragment"><code data-trim data-noescape class="elm">
square : number -> number
square = pow 2

four = square 2
						</code></pre>

						<aside class="notes">
							<ul>
								<li>Always put 'data' last, allows for partial application</li>
							</ul>
						</aside>
					</section>
				</section>

				<section>
					<section>
						<h3>The Elm Architecture</h3>

						<aside class="notes">
							<ul>
								<li>Similar to Flux, or those familiar w/ React</li>
							</ul>
						</aside>
					</section>

					<section>
						<h4>Model</h4>

						<aside class="notes">
							<ul>
								<li>Source of truth for application state. <em>Not</em> the DOM.</li>
								<li>Strongly typed, to avoid runtime errors.</li>
							</ul>
						</aside>

				  	<pre><code data-trim data-noescape class="elm">
type alias Model =
    { position : Position
    , drag : Maybe Drag
    }
						</code></pre>
					</section>
					
					<section>
						<h4>View Function</h4>

						<aside class="notes">
							<ul>
								<li>State as input, outputs virtual DOM</li>
								<li>Program reconciles virtual DOM diff after each render</li>
								<li>Produced HTML can emit messages as a result of handling DOM events</li>
							</ul>
						</aside>

				  	<pre><code data-trim data-noescape class="elm">
view : Int -&gt; Html Msg
view model =
  div []
    [ button [ onClick Decrement ] [ text "-" ]
    , div [] [ text (toString model) ]
    , button [ onClick Increment ] [ text "+" ]
    ]
						</code></pre>
					</section>

					<section>
						<h4>Update Function</h4>

						<aside class="notes">
							<ul>
								<li>Message union type defines the types of input to your business logic</li>
								<li>Update function takes message, and current model state, and returns new model state</li>
							</ul>
						</aside>
				  		<pre><code data-trim data-noescape class="elm">
type Msg = Increment | Decrement

update : Msg -&gt; Model -&gt; Model
update msg model =
  case msg of
    Increment -&gt;
      model + 1

    Decrement -&gt;
      model - 1
						</code></pre>
					</section>
				</section>

				<section>
					<section>
						<h2>Commands</h2>
						<ul>
							<li>Description of something to <em>do</em></li>
							<li><em>Not</em> code that actually performs a task</li>
							<li>Result of the task fed back in via update message</li>
						</ul>
					</section>

					<section>
						<h4>Roll My D20!</h4>
						<pre><code data-trim data-noescape class="elm">
update : Msg -> Model -> (Model, Cmd Msg)
update msg model =
  case msg of
    Roll ->
      (model, Random.generate NewFace (Random.int 1 20))

    NewFace newFace ->
      (Model newFace, Cmd.none)
						</code></pre>
					</section>

					<section>
						<h4>Creating The Command</h4>
						<pre><code data-trim data-noescape class="elm">
							Random.generate : (a -> msg) -> Random.Generator a -> Cmd msg
						</code></pre>

						<div class="fragment">

							<h4>Describing our RNG</h4>
							<pre><code data-trim data-noescape class="elm">
							Random.int : Int -> Int -> Random.Generator Int
						</code></pre>
						</div>
					</section>

					<section>
						<pre><code data-trim data-noescape class="elm">
type Msg
    = FocusOn String
    | FocusResult (Result Dom.Error ())

update : Msg -> Model -> ( Model, Cmd Msg )
update msg model =
    case msg of
        FocusOn id ->
            ( model, Dom.focus id |> Task.attempt FocusResult )

        FocusResult result ->
            -- handle success or failure here
            case result of
                Err (Dom.NotFound id) ->
                    -- unable to find dom 'id'
                Ok () ->
                    -- successfully focus the dom
						</code></pre>
					</section>



					<!-- TODO: Focus command example -->
				</section>

				<section>
					<section>
						<h2>Subscriptions</h2>
					</section>

					<!-- TODO: Show time subscription -->
				</section>

				<section>
					<section>
						<h2>JavaScript Interop</h2>
					</section>
				</section>

				<section>
					<section>
						<h2>Development Experience</h2>
					</section>

					<section>
						<h3>Time Traveling Debugger</h3>

						<img src="img/back-to-the-future.jpg" height="545" width="970" alt="Back To The Future"/>
						<aside class="notes">
							<ul>
								<li>Possible because entire application state in model</li>
								<li>UI state is directly mapped from application state</li>
							</ul>
						</aside>
					</section>

					<section>
						<h3>Refactoring</h3>

						<aside class="notes">
							<p>Add a 'Reset' Message type!</p>
						</aside>
					</section>

					<section>
						<div style="font-family: monospace; font-size: 16px; text-align: left; display: block; white-space: pre; background-color: rgb(39, 40, 34); padding: 2em;">Detected errors in 1 module.
							<span style="color: rgb(211, 56, 211);">==================================== ERRORS ====================================</span>
							<span style="color: rgb(213, 32, 12);"></span>
							<span style="color: rgb(51, 187, 200);">
-- MISSING PATTERNS ------------------------------ increment-decrement-reset.elm
</span>
							<span style="color: rgb(213, 32, 12);"></span>This `case` does not have branches for all possibilities.<span style="color: rgb(213, 32, 12);"></span>
							<span style="color: rgb(154, 154, 154);">13|</span><span style="color: rgb(213, 32, 12);">&gt;</span><span style="color: rgb(154, 154, 154);">  case msg of</span>
							<span style="color: rgb(154, 154, 154);">14|</span><span style="color: rgb(213, 32, 12);">&gt;</span><span style="color: rgb(154, 154, 154);">    Increment -&gt;</span>
							<span style="color: rgb(154, 154, 154);">15|</span><span style="color: rgb(213, 32, 12);">&gt;</span><span style="color: rgb(154, 154, 154);">      model + 1</span>
							<span style="color: rgb(154, 154, 154);">16|</span><span style="color: rgb(213, 32, 12);">&gt;</span><span style="color: rgb(154, 154, 154);">    Decrement -&gt;</span>
							<span style="color: rgb(154, 154, 154);">17|</span><span style="color: rgb(213, 32, 12);">&gt;</span><span style="color: rgb(154, 154, 154);">      model - 1</span>
							<span style="color: rgb(213, 32, 12);"></span>
							You need to account for the following values:
							<span style="color: rgb(213, 32, 12);"></span>
							<span style="color: rgb(154, 154, 154);">    Main.Reset</span>
							<span style="color: rgb(213, 32, 12);"></span>
							Add a branch to cover this pattern!
							<span style="color: rgb(213, 32, 12);"></span>
							If you are seeing this error for the first time, check out these hints:
							&lt;https://github.com/elm-lang/elm-compiler/blob/0.18.0/hints/missing-patterns.md&gt;
							The recommendations about wildcard patterns and `Debug.crash` are important!
							<span style="color: rgb(213, 32, 12);"></span>
							<span style="color: rgb(213, 32, 12);"></span>
						</div>
					</section>

					<section>
						<h3>Growth</h3>

						<ul>
							<li>Type system provides safety net</li>
							<li>Stateless Components</li>
						</ul>
						<aside class="notes">
						</aside>
					</section>
				</section>

				<section>
					<h3>Links</h3>
					<ul>
						<li>Elm - <a href="http://elm-lang.org/">http//elm-lang.org/</a></li>
						<li>Try Online - <a href="http://elm-lang.org/">http//elm-lang.org/try</a></li>
					</ul>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
